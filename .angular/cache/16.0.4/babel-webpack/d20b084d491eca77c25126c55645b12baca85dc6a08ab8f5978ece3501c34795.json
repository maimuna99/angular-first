{"ast":null,"code":"import { BehaviorSubject, map } from 'rxjs';\nimport { APP_SETTINGS } from '../settings/app.settings';\nimport * as i0 from \"@angular/core\";\nclass StoreService {\n  // constructor(\n  //   @Inject(DATA_PATH)\n  //   public dataPath: string\n  // ) {\n  //   this.products$ = ajax.getJSON<Product[]>(dataPath);\n  // }\n  constructor(appSettings) {\n    this.appSettings = appSettings;\n    this.cartItemsSubject = new BehaviorSubject([]);\n    this.search = new BehaviorSubject('');\n    this.cartItems$ = this.cartItemsSubject.asObservable();\n    this.total$ = this.cartItems$.pipe(map(items => items.reduce((acc, item) => acc + item.product.price * item.quantity, 0)));\n    console.log(this.appSettings.dataSourceURL); // Accessing the dataSourceURL from app settings\n    console.log(this.appSettings.pageSize); // Accessing the pageSize from app settings\n    console.log(this.appSettings.language); // Accessing the language from app settings\n  }\n\n  addItemToCart(product) {\n    const currentItems = this.cartItemsSubject.getValue();\n    const itemIndex = currentItems.findIndex(item => item.product.id === product.id);\n    if (itemIndex > -1) {\n      const updatedItems = [...currentItems];\n      updatedItems[itemIndex].quantity++;\n      this.cartItemsSubject.next(updatedItems);\n    } else {\n      const newItem = {\n        product,\n        quantity: 1\n      };\n      const updatedItems = [...currentItems, newItem];\n      this.cartItemsSubject.next(updatedItems);\n    }\n  }\n  removeItemFromCart(product) {\n    const currentItems = this.cartItemsSubject.getValue();\n    const itemIndex = currentItems.findIndex(item => item.product.id === product.id);\n    if (itemIndex > -1) {\n      const updatedItems = [...currentItems];\n      if (updatedItems[itemIndex].quantity > 1) {\n        updatedItems[itemIndex].quantity--;\n      } else {\n        updatedItems.splice(itemIndex, 1);\n      }\n      this.cartItemsSubject.next(updatedItems);\n    }\n  }\n}\nStoreService.ɵfac = function StoreService_Factory(t) {\n  return new (t || StoreService)(i0.ɵɵinject(APP_SETTINGS));\n};\nStoreService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: StoreService,\n  factory: StoreService.ɵfac,\n  providedIn: 'root'\n});\nexport { StoreService };","map":{"version":3,"names":["BehaviorSubject","map","APP_SETTINGS","StoreService","constructor","appSettings","cartItemsSubject","search","cartItems$","asObservable","total$","pipe","items","reduce","acc","item","product","price","quantity","console","log","dataSourceURL","pageSize","language","addItemToCart","currentItems","getValue","itemIndex","findIndex","id","updatedItems","next","newItem","removeItemFromCart","splice","i0","ɵɵinject","factory","ɵfac","providedIn"],"sources":["/Users/maimunawahaibi/Desktop/angular-first/src/app/services/store.service.ts"],"sourcesContent":["import { Injectable, Inject } from '@angular/core';\nimport { ajax } from 'rxjs/ajax';\nimport { Observable, BehaviorSubject, map } from 'rxjs';\nimport { Product } from '../interfaces/product.interface';\nimport { CartItem } from '../interfaces/cart.interface';\nimport { APP_SETTINGS } from '../settings/app.settings';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class StoreService {\n  private cartItemsSubject = new BehaviorSubject<CartItem[]>([]);\n  public search = new BehaviorSubject<string>('');\n  cartItems$ = this.cartItemsSubject.asObservable();\n  products$: Observable<Product[]>;\n\n  total$ = this.cartItems$.pipe(\n    map((items) =>\n      items.reduce((acc, item) => acc + item.product.price * item.quantity, 0)\n    )\n  );\n\n  // constructor(\n  //   @Inject(DATA_PATH)\n  //   public dataPath: string\n  // ) {\n  //   this.products$ = ajax.getJSON<Product[]>(dataPath);\n  // }\n\n  constructor(@Inject(APP_SETTINGS) private appSettings: any) {\n    console.log(this.appSettings.dataSourceURL); // Accessing the dataSourceURL from app settings\n    console.log(this.appSettings.pageSize); // Accessing the pageSize from app settings\n    console.log(this.appSettings.language); // Accessing the language from app settings\n  }\n\n  addItemToCart(product: Product): void {\n    const currentItems = this.cartItemsSubject.getValue();\n    const itemIndex = currentItems.findIndex(\n      (item) => item.product.id === product.id\n    );\n\n    if (itemIndex > -1) {\n      const updatedItems = [...currentItems];\n      updatedItems[itemIndex].quantity++;\n      this.cartItemsSubject.next(updatedItems);\n    } else {\n      const newItem: CartItem = { product, quantity: 1 };\n      const updatedItems = [...currentItems, newItem];\n      this.cartItemsSubject.next(updatedItems);\n    }\n  }\n\n  removeItemFromCart(product: Product): void {\n    const currentItems = this.cartItemsSubject.getValue();\n    const itemIndex = currentItems.findIndex(\n      (item) => item.product.id === product.id\n    );\n\n    if (itemIndex > -1) {\n      const updatedItems = [...currentItems];\n      if (updatedItems[itemIndex].quantity > 1) {\n        updatedItems[itemIndex].quantity--;\n      } else {\n        updatedItems.splice(itemIndex, 1);\n      }\n      this.cartItemsSubject.next(updatedItems);\n    }\n  }\n}\n"],"mappings":"AAEA,SAAqBA,eAAe,EAAEC,GAAG,QAAQ,MAAM;AAGvD,SAASC,YAAY,QAAQ,0BAA0B;;AAEvD,MAGaC,YAAY;EAYvB;EACA;EACA;EACA;EACA;EACA;EAEAC,YAA0CC,WAAgB;IAAhB,KAAAA,WAAW,GAAXA,WAAW;IAlB7C,KAAAC,gBAAgB,GAAG,IAAIN,eAAe,CAAa,EAAE,CAAC;IACvD,KAAAO,MAAM,GAAG,IAAIP,eAAe,CAAS,EAAE,CAAC;IAC/C,KAAAQ,UAAU,GAAG,IAAI,CAACF,gBAAgB,CAACG,YAAY,EAAE;IAGjD,KAAAC,MAAM,GAAG,IAAI,CAACF,UAAU,CAACG,IAAI,CAC3BV,GAAG,CAAEW,KAAK,IACRA,KAAK,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,IAAI,KAAKD,GAAG,GAAGC,IAAI,CAACC,OAAO,CAACC,KAAK,GAAGF,IAAI,CAACG,QAAQ,EAAE,CAAC,CAAC,CACzE,CACF;IAUCC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACf,WAAW,CAACgB,aAAa,CAAC,CAAC,CAAC;IAC7CF,OAAO,CAACC,GAAG,CAAC,IAAI,CAACf,WAAW,CAACiB,QAAQ,CAAC,CAAC,CAAC;IACxCH,OAAO,CAACC,GAAG,CAAC,IAAI,CAACf,WAAW,CAACkB,QAAQ,CAAC,CAAC,CAAC;EAC1C;;EAEAC,aAAaA,CAACR,OAAgB;IAC5B,MAAMS,YAAY,GAAG,IAAI,CAACnB,gBAAgB,CAACoB,QAAQ,EAAE;IACrD,MAAMC,SAAS,GAAGF,YAAY,CAACG,SAAS,CACrCb,IAAI,IAAKA,IAAI,CAACC,OAAO,CAACa,EAAE,KAAKb,OAAO,CAACa,EAAE,CACzC;IAED,IAAIF,SAAS,GAAG,CAAC,CAAC,EAAE;MAClB,MAAMG,YAAY,GAAG,CAAC,GAAGL,YAAY,CAAC;MACtCK,YAAY,CAACH,SAAS,CAAC,CAACT,QAAQ,EAAE;MAClC,IAAI,CAACZ,gBAAgB,CAACyB,IAAI,CAACD,YAAY,CAAC;KACzC,MAAM;MACL,MAAME,OAAO,GAAa;QAAEhB,OAAO;QAAEE,QAAQ,EAAE;MAAC,CAAE;MAClD,MAAMY,YAAY,GAAG,CAAC,GAAGL,YAAY,EAAEO,OAAO,CAAC;MAC/C,IAAI,CAAC1B,gBAAgB,CAACyB,IAAI,CAACD,YAAY,CAAC;;EAE5C;EAEAG,kBAAkBA,CAACjB,OAAgB;IACjC,MAAMS,YAAY,GAAG,IAAI,CAACnB,gBAAgB,CAACoB,QAAQ,EAAE;IACrD,MAAMC,SAAS,GAAGF,YAAY,CAACG,SAAS,CACrCb,IAAI,IAAKA,IAAI,CAACC,OAAO,CAACa,EAAE,KAAKb,OAAO,CAACa,EAAE,CACzC;IAED,IAAIF,SAAS,GAAG,CAAC,CAAC,EAAE;MAClB,MAAMG,YAAY,GAAG,CAAC,GAAGL,YAAY,CAAC;MACtC,IAAIK,YAAY,CAACH,SAAS,CAAC,CAACT,QAAQ,GAAG,CAAC,EAAE;QACxCY,YAAY,CAACH,SAAS,CAAC,CAACT,QAAQ,EAAE;OACnC,MAAM;QACLY,YAAY,CAACI,MAAM,CAACP,SAAS,EAAE,CAAC,CAAC;;MAEnC,IAAI,CAACrB,gBAAgB,CAACyB,IAAI,CAACD,YAAY,CAAC;;EAE5C;;AAzDW3B,YAAY,C;mBAAZA,YAAY,EAAAgC,EAAA,CAAAC,QAAA,CAmBHlC,YAAY;AAAA;AAnBrBC,YAAY,C;SAAZA,YAAY;EAAAkC,OAAA,EAAZlC,YAAY,CAAAmC,IAAA;EAAAC,UAAA,EAFX;AAAM;SAEPpC,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}