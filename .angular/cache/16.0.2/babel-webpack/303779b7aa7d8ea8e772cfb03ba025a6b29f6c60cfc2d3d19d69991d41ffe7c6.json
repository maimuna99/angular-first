{"ast":null,"code":"import { ajax } from 'rxjs/ajax';\nimport { BehaviorSubject } from 'rxjs';\nimport { scan } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nclass StoreService {\n  constructor() {\n    this.cartItemsSubject = new BehaviorSubject([]);\n    this.total$ = new BehaviorSubject(0);\n    //never expose subjects directly -> use observable\n    this.cartItems$ = this.cartItemsSubject.asObservable();\n    //products observable\n    this.producst$ = ajax.getJSON('/assets/data.json');\n    //total observable\n    this.total$ = this.totalSubject.asObservable();\n  }\n  addItemToCart(product) {\n    this.cartItemsSubject.next([...this.cartItemsSubject.getValue(), product]);\n    this.total$.pipe(scan((acc, val) => acc + val, product.price)).subscribe(total => {\n      this.total$.next(total);\n    });\n  }\n}\nStoreService.ɵfac = function StoreService_Factory(t) {\n  return new (t || StoreService)();\n};\nStoreService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: StoreService,\n  factory: StoreService.ɵfac,\n  providedIn: 'root'\n});\nexport { StoreService };","map":{"version":3,"names":["ajax","BehaviorSubject","scan","StoreService","constructor","cartItemsSubject","total$","cartItems$","asObservable","producst$","getJSON","totalSubject","addItemToCart","product","next","getValue","pipe","acc","val","price","subscribe","total","factory","ɵfac","providedIn"],"sources":["/Users/maimunawahaibi/Desktop/angular-first/src/app/services/store.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { ajax } from 'rxjs/ajax';\nimport { Observable, BehaviorSubject } from 'rxjs';\nimport { Product } from '../interfaces/product.interface';\nimport { scan } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class StoreService {\n  private cartItemsSubject = new BehaviorSubject<any>([]);\n  private total$ = new BehaviorSubject<number>(0);\n  //never expose subjects directly -> use observable\n  cartItems$ = this.cartItemsSubject.asObservable();\n  //products observable\n  producst$ = ajax.getJSON<Product[]>('/assets/data.json');\n  //total observable\n  total$ = this.totalSubject.asObservable();\n\n  addItemToCart(product: Product): void {\n    this.cartItemsSubject.next([...this.cartItemsSubject.getValue(), product]);\n    this.total$\n      .pipe(scan((acc, val) => acc + val, product.price))\n      .subscribe((total) => {\n        this.total$.next(total);\n      });\n  }\n}\n"],"mappings":"AACA,SAASA,IAAI,QAAQ,WAAW;AAChC,SAAqBC,eAAe,QAAQ,MAAM;AAElD,SAASC,IAAI,QAAQ,gBAAgB;;AAErC,MAGaC,YAAY;EAHzBC,YAAA;IAIU,KAAAC,gBAAgB,GAAG,IAAIJ,eAAe,CAAM,EAAE,CAAC;IAC/C,KAAAK,MAAM,GAAG,IAAIL,eAAe,CAAS,CAAC,CAAC;IAC/C;IACA,KAAAM,UAAU,GAAG,IAAI,CAACF,gBAAgB,CAACG,YAAY,EAAE;IACjD;IACA,KAAAC,SAAS,GAAGT,IAAI,CAACU,OAAO,CAAY,mBAAmB,CAAC;IACxD;IACA,KAAAJ,MAAM,GAAG,IAAI,CAACK,YAAY,CAACH,YAAY,EAAE;;EAEzCI,aAAaA,CAACC,OAAgB;IAC5B,IAAI,CAACR,gBAAgB,CAACS,IAAI,CAAC,CAAC,GAAG,IAAI,CAACT,gBAAgB,CAACU,QAAQ,EAAE,EAAEF,OAAO,CAAC,CAAC;IAC1E,IAAI,CAACP,MAAM,CACRU,IAAI,CAACd,IAAI,CAAC,CAACe,GAAG,EAAEC,GAAG,KAAKD,GAAG,GAAGC,GAAG,EAAEL,OAAO,CAACM,KAAK,CAAC,CAAC,CAClDC,SAAS,CAAEC,KAAK,IAAI;MACnB,IAAI,CAACf,MAAM,CAACQ,IAAI,CAACO,KAAK,CAAC;IACzB,CAAC,CAAC;EACN;;AAjBWlB,YAAY,C;mBAAZA,YAAY;AAAA;AAAZA,YAAY,C;SAAZA,YAAY;EAAAmB,OAAA,EAAZnB,YAAY,CAAAoB,IAAA;EAAAC,UAAA,EAFX;AAAM;SAEPrB,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}